<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>hariX: analyze_os/analyzeOS.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1-20100728 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>analyze_os/analyzeOS.cc</h1>  </div>
</div>
<div class="contents">
<a href="analyzeOS_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;Wt/WTable&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;Wt/WPushButton&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;Wt/WAnchor&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;Wt/WText&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;Wt/WBreak&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;Wt/WFileUpload&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;Wt/WInPlaceEdit&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;Wt/WGroupBox&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;Wt/WDefaultLoadingIndicator&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;Wt/WOverlayLoadingIndicator&gt;</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;../harixApp.hpp&quot;</span>      <span class="comment">// needed for WApplication::instance()</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="analyzeOS_8hpp.html" title="AnalyzeOsWidget Class Interface.">analyzeOS.hpp</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;../os_info.hpp&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;../div.hpp&quot;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">using namespace </span>Wt;
<a name="l00027"></a>00027 <span class="keyword">using</span> Wt::WString;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <a class="code" href="classAnalyzeOsWidget.html" title="Analyze OS Page representation.">AnalyzeOsWidget</a>* <a class="code" href="classAnalyzeOsWidget.html#aed7155e9f4a27d063f43676e838be0f2" title="Pointer to the only instance of AnalyzeOsWidget per session.">AnalyzeOsWidget::instance_</a> = NULL; <span class="comment">// Pointer to the only instance of AnalyzeOsWidget.</span>
<a name="l00030"></a>00030 <span class="keywordtype">bool</span> <a class="code" href="classAnalyzeOsWidget.html#aefe7f3c1fb0acfe454f03b37fddbb032">AnalyzeOsWidget::isOsUploaded_</a> = <span class="keyword">false</span>;        <span class="comment">// Set to true if &#39;distro.txt&#39; is uploaded.</span>
<a name="l00031"></a>00031 <span class="keywordtype">bool</span> <a class="code" href="classAnalyzeOsWidget.html#abdcff8e978a2a9ff3a0e82868ad8a90e">AnalyzeOsWidget::isPcimapUploaded_</a> = <span class="keyword">false</span>;    <span class="comment">// Set to true if &#39;modules.pcimap&#39; is uploaded.</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <a class="code" href="classAnalyzeOsWidget.html#acb7d27f414ab05df7ac2ee5cc2bb688e" title="Constructor.">AnalyzeOsWidget::AnalyzeOsWidget</a>( WContainerWidget* parent ) : WContainerWidget(parent)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   parent_ = parent;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   <span class="comment">/*</span>
<a name="l00038"></a>00038 <span class="comment">   * Header Part for navigation</span>
<a name="l00039"></a>00039 <span class="comment">   * @{</span>
<a name="l00040"></a>00040 <span class="comment">   */</span>
<a name="l00041"></a>00041   WContainerWidget *result;
<a name="l00042"></a>00042   addWidget( result = <span class="keyword">new</span> WContainerWidget() );
<a name="l00043"></a>00043   <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a> *header = <span class="keyword">new</span> <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a>(result, <span class="stringliteral">&quot;header&quot;</span>);
<a name="l00044"></a>00044   <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a> *logo = <span class="keyword">new</span> <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a>(header, <span class="stringliteral">&quot;widgparty&quot;</span>);
<a name="l00045"></a>00045   logo-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;&lt;p&gt;hari&lt;a&gt;X&lt;/a&gt;&lt;/p&gt;&quot;</span>) );
<a name="l00046"></a>00046   <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a> *content = <span class="keyword">new</span> <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a>(result, <span class="stringliteral">&quot;content&quot;</span>);
<a name="l00047"></a>00047   <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a> *menu = <span class="keyword">new</span> <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a>(content, <span class="stringliteral">&quot;menu&quot;</span>);
<a name="l00048"></a>00048   WContainerWidget *menulist = <span class="keyword">new</span> WContainerWidget(menu);
<a name="l00049"></a>00049   menulist-&gt;setList(<span class="keyword">true</span>);
<a name="l00050"></a>00050   
<a name="l00051"></a>00051   WAnchor *aHome;
<a name="l00052"></a>00052   menulist-&gt;addWidget( aHome = <span class="keyword">new</span> WAnchor(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;Home&quot;</span>) );
<a name="l00053"></a>00053   aHome-&gt;setRefInternalPath(<span class="stringliteral">&quot;/home&quot;</span>);
<a name="l00054"></a>00054   WAnchor *aAnalyzeOs;
<a name="l00055"></a>00055   menulist-&gt;addWidget( aAnalyzeOs = <span class="keyword">new</span> WAnchor(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;Analyze OS&quot;</span>) );
<a name="l00056"></a>00056   aAnalyzeOs-&gt;setRefInternalPath(<span class="stringliteral">&quot;/analyze_os&quot;</span>);
<a name="l00057"></a>00057   aAnalyzeOs-&gt;setStyleClass(<span class="stringliteral">&quot;selected&quot;</span>);
<a name="l00058"></a>00058   WAnchor *aQueryDevices;
<a name="l00059"></a>00059   menulist-&gt;addWidget( aQueryDevices = <span class="keyword">new</span> WAnchor(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;Query Devices&quot;</span>) );
<a name="l00060"></a>00060   aQueryDevices-&gt;setRefInternalPath(<span class="stringliteral">&quot;/query_devices&quot;</span>);
<a name="l00061"></a>00061   WAnchor *aMainboards;
<a name="l00062"></a>00062   menulist-&gt;addWidget( aMainboards = <span class="keyword">new</span> WAnchor(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;Mainboards&quot;</span>) );
<a name="l00063"></a>00063   aMainboards-&gt;setRefInternalPath(<span class="stringliteral">&quot;/mainboards&quot;</span>);
<a name="l00064"></a>00064   
<a name="l00065"></a>00065   <span class="comment">/*</span>
<a name="l00066"></a>00066 <span class="comment">    Container &#39;page&#39; holding contents shown in page apart from the Header Part.</span>
<a name="l00067"></a>00067 <span class="comment">    Anything else from the Header to be shown in page is added to &#39;page&#39; container.</span>
<a name="l00068"></a>00068 <span class="comment">  */</span>
<a name="l00069"></a>00069   <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a> *page = <span class="keyword">new</span> <a class="code" href="classDiv.html" title="HTML &amp;lt;div&amp;gt; implementation.">Div</a>(content, <span class="stringliteral">&quot;pagearea&quot;</span>);
<a name="l00070"></a>00070   <span class="comment">/*</span>
<a name="l00071"></a>00071 <span class="comment">   * @}</span>
<a name="l00072"></a>00072 <span class="comment">   */</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="comment">/*</span>
<a name="l00077"></a>00077 <span class="comment">   * Upload Screen</span>
<a name="l00078"></a>00078 <span class="comment">   * @{</span>
<a name="l00079"></a>00079 <span class="comment">   */</span>
<a name="l00080"></a>00080   WAnchor *os_script_;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   page-&gt;addWidget( layoutAnalyze_ = <span class="keyword">new</span> WTable() );
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   layoutAnalyze_-&gt;resize(400,160);
<a name="l00085"></a>00085   layoutAnalyze_-&gt;rowAt(0)-&gt;setHeight(20);
<a name="l00086"></a>00086   
<a name="l00087"></a>00087   <span class="comment">// Put a download link for script.</span>
<a name="l00088"></a>00088   layoutAnalyze_-&gt;elementAt(0,0)-&gt;addWidget( os_script_ = <span class="keyword">new</span> WAnchor(<span class="stringliteral">&quot;queryDistro.sh&quot;</span>, <span class="stringliteral">&quot;Get Script!&quot;</span>) );
<a name="l00089"></a>00089   os_script_-&gt;setTarget(TargetNewWindow);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091   layoutAnalyze_-&gt;elementAt(1,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;Download and Run the script, &lt;br /&gt;&quot;</span>
<a name="l00092"></a>00092                                             <span class="stringliteral">&quot;there will be a distro.txt file generated on the folder,  &lt;br /&gt;&quot;</span>
<a name="l00093"></a>00093                                             <span class="stringliteral">&quot;upload it together with modules.pcimap file of your kernel.. &lt;br /&gt;&quot;</span>
<a name="l00094"></a>00094                                             <span class="stringliteral">&quot;*Given file names must match!&quot;</span>));
<a name="l00095"></a>00095   layoutAnalyze_-&gt;elementAt(1,0)-&gt;setColumnSpan(2);
<a name="l00096"></a>00096   layoutAnalyze_-&gt;elementAt(1,0)-&gt;setLineHeight(15);
<a name="l00097"></a>00097   layoutAnalyze_-&gt;rowAt(1)-&gt;setHeight(60);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   layoutAnalyze_-&gt;rowAt(2)-&gt;setHeight(25);
<a name="l00100"></a>00100   layoutAnalyze_-&gt;elementAt(2,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;File *distro.txt:&quot;</span>) );
<a name="l00101"></a>00101   
<a name="l00102"></a>00102   <span class="comment">// File Upload Area for &#39;distro.txt&#39;</span>
<a name="l00103"></a>00103   layoutAnalyze_-&gt;elementAt(2,1)-&gt;addWidget( uploadOs_ = <span class="keyword">new</span> WFileUpload() );
<a name="l00104"></a>00104   layoutAnalyze_-&gt;rowAt(3)-&gt;setHeight(25);
<a name="l00105"></a>00105   
<a name="l00106"></a>00106   <span class="comment">// File Upload Area for &#39;modules.pcimap&#39;</span>
<a name="l00107"></a>00107   layoutAnalyze_-&gt;elementAt(3,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;File *modules.pcimap:&quot;</span>) );
<a name="l00108"></a>00108   layoutAnalyze_-&gt;elementAt(3,1)-&gt;addWidget( uploadPcimap_ = <span class="keyword">new</span> WFileUpload() );
<a name="l00109"></a>00109   layoutAnalyze_-&gt;rowAt(4)-&gt;setHeight(25);
<a name="l00110"></a>00110   layoutAnalyze_-&gt;elementAt(4,0)-&gt;addWidget( bUpload_ = <span class="keyword">new</span> WPushButton(<span class="stringliteral">&quot;Upload&quot;</span>) );
<a name="l00111"></a>00111   
<a name="l00112"></a>00112   <span class="comment">// Trigger bUpload_Click() function on &#39;Upload&#39; click. </span>
<a name="l00113"></a>00113   bUpload_-&gt;clicked().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#aa7cb68854d6fdc2434bda4607d644655" title="Triggered on &amp;#39;Upload&amp;#39; button click.">AnalyzeOsWidget::bUpload_Click</a>);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115   <span class="comment">// React to a succesfull upload.Call osUploaded() or pcimapUploaded() function when respective uploads are done.</span>
<a name="l00116"></a>00116   uploadOs_-&gt;uploaded().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a2273a49e40547a9ec6c2e7a0a9394433" title="Called on uploaded() event of uploadOs_ File Upload.">AnalyzeOsWidget::osUploaded</a>);
<a name="l00117"></a>00117   uploadPcimap_-&gt;uploaded().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a6da9ecd068101c9d879ff88d7ec22c9c" title="Called on uploaded() event of uploadPcimap_ File Upload.">AnalyzeOsWidget::pcimapUploaded</a>);
<a name="l00118"></a>00118   <span class="comment">/*</span>
<a name="l00119"></a>00119 <span class="comment">   * @}</span>
<a name="l00120"></a>00120 <span class="comment">   */</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   
<a name="l00125"></a>00125   <span class="comment">/*</span>
<a name="l00126"></a>00126 <span class="comment">   * Result Screen</span>
<a name="l00127"></a>00127 <span class="comment">   * @{</span>
<a name="l00128"></a>00128 <span class="comment">   */</span>
<a name="l00129"></a>00129   page-&gt;addWidget( layoutResult_ = <span class="keyword">new</span> WTable() );
<a name="l00130"></a>00130   layoutResult_-&gt;hide();
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   layoutResult_-&gt;rowAt(1)-&gt;setHeight( WLength(20) );
<a name="l00133"></a>00133   layoutResult_-&gt;columnAt(0)-&gt;setWidth( WLength(300) );
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="comment">// Create a group box to hold OS information edit regions.</span>
<a name="l00136"></a>00136   layoutResult_-&gt;elementAt(0,0)-&gt;addWidget( groupDetectedOs_ = <span class="keyword">new</span> WGroupBox(<span class="stringliteral">&quot;Detected Operating System&quot;</span>) );
<a name="l00137"></a>00137   WTable* layoutDetectedOs;
<a name="l00138"></a>00138   groupDetectedOs_-&gt;addWidget( layoutDetectedOs = <span class="keyword">new</span> WTable() );
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="comment">// Editable text areas for OS information</span>
<a name="l00141"></a>00141   layoutDetectedOs-&gt;elementAt(0,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;OS Name:&quot;</span> ) );
<a name="l00142"></a>00142   layoutDetectedOs-&gt;elementAt(0,1)-&gt;addWidget( editOs_ = <span class="keyword">new</span> WInPlaceEdit(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00143"></a>00143   layoutDetectedOs-&gt;elementAt(1,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;Release:&quot;</span> ) );
<a name="l00144"></a>00144   layoutDetectedOs-&gt;elementAt(1,1)-&gt;addWidget( editRel_ = <span class="keyword">new</span> WInPlaceEdit(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00145"></a>00145   layoutDetectedOs-&gt;elementAt(2,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;Kernel :&quot;</span> ) );
<a name="l00146"></a>00146   layoutDetectedOs-&gt;elementAt(2,1)-&gt;addWidget( editKer_ = <span class="keyword">new</span> WInPlaceEdit(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00147"></a>00147   layoutDetectedOs-&gt;elementAt(3,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;Arch.  :&quot;</span> ) );
<a name="l00148"></a>00148   layoutDetectedOs-&gt;elementAt(3,1)-&gt;addWidget( editArch_ = <span class="keyword">new</span> WInPlaceEdit(<span class="stringliteral">&quot;&quot;</span>) );
<a name="l00149"></a>00149   layoutDetectedOs-&gt;elementAt(4,0)-&gt;addWidget( <span class="keyword">new</span> WBreak() );
<a name="l00150"></a>00150   
<a name="l00151"></a>00151   layoutDetectedOs-&gt;elementAt(5,0)-&gt;addWidget( bCheckOs_ = <span class="keyword">new</span> WPushButton(<span class="stringliteral">&quot;Check Record&quot;</span>) );
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <span class="comment">// Trigger bCheckOs_Click() function on &#39;Check Record&#39; click.</span>
<a name="l00154"></a>00154   bCheckOs_-&gt;clicked().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#ace0500ace0b2c4ce82403f6062f85700" title="Triggered on &amp;#39;Check Record&amp;#39; button click.">AnalyzeOsWidget::bCheckOs_Click</a>);
<a name="l00155"></a>00155   
<a name="l00156"></a>00156   <span class="comment">// Set CSS style for hover efect on edit regions</span>
<a name="l00157"></a>00157   editOs_-&gt;setStyleClass(<span class="stringliteral">&quot;inplace&quot;</span>);
<a name="l00158"></a>00158   editRel_-&gt;setStyleClass(<span class="stringliteral">&quot;inplace&quot;</span>);
<a name="l00159"></a>00159   editKer_-&gt;setStyleClass(<span class="stringliteral">&quot;inplace&quot;</span>);
<a name="l00160"></a>00160   editArch_-&gt;setStyleClass(<span class="stringliteral">&quot;inplace&quot;</span>);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="comment">// Call the corresponding functions on &#39;Save&#39; click of edit regions.</span>
<a name="l00163"></a>00163   editOs_-&gt;valueChanged().connect( <span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a866d89a7f2359d904aa3b2fd90c05241" title="Triggered when &amp;#39;OS Name&amp;#39; edited.">AnalyzeOsWidget::changeOsName</a> );
<a name="l00164"></a>00164   editRel_-&gt;valueChanged().connect( <span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a947aafa9b1dec6e6c134c5cd33f3bf5d" title="Triggered when &amp;#39;Release&amp;#39; edited.">AnalyzeOsWidget::changeRelease</a> );
<a name="l00165"></a>00165   editKer_-&gt;valueChanged().connect( <span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a18556df2bfc682457829b86b2c07f283" title="Triggered when &amp;#39;Kernel&amp;#39; edited.">AnalyzeOsWidget::changeKernel</a> );
<a name="l00166"></a>00166   editArch_-&gt;valueChanged().connect( <span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a2cce1ea7d04f152cd07c1af1f8cbebb9" title="Triggered when &amp;#39;Arch.&amp;#39; edited.">AnalyzeOsWidget::changeArch</a> );
<a name="l00167"></a>00167     
<a name="l00168"></a>00168   layoutResult_-&gt;columnAt(1)-&gt;setWidth( WLength(50) );
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   <span class="comment">/*</span>
<a name="l00171"></a>00171 <span class="comment">    Area to show the results of OS Record Check.</span>
<a name="l00172"></a>00172 <span class="comment">    Consisting of a Text area for the message, an &#39;Add OS&#39; or &#39;Update Pcimap&#39; button</span>
<a name="l00173"></a>00173 <span class="comment">    and &#39;Cancel&#39; button.</span>
<a name="l00174"></a>00174 <span class="comment">  */</span>
<a name="l00175"></a>00175   layoutResult_-&gt;columnAt(2)-&gt;setWidth( WLength(250) );
<a name="l00176"></a>00176   layoutResult_-&gt;elementAt(0,2)-&gt;addWidget( layoutCheckResult_ = <span class="keyword">new</span> WTable() );
<a name="l00177"></a>00177   layoutCheckResult_-&gt;elementAt(0,0)-&gt;addWidget( <span class="keyword">new</span> WBreak() );
<a name="l00178"></a>00178   layoutCheckResult_-&gt;elementAt(1,0)-&gt;setColumnSpan(2);
<a name="l00179"></a>00179   layoutCheckResult_-&gt;elementAt(1,0)-&gt;setContentAlignment(AlignCenter);
<a name="l00180"></a>00180   layoutCheckResult_-&gt;elementAt(1,0)-&gt;addWidget( txtOsResult_ = <span class="keyword">new</span> WText() );
<a name="l00181"></a>00181   layoutCheckResult_-&gt;elementAt(2,0)-&gt;addWidget( <span class="keyword">new</span> WBreak() );
<a name="l00182"></a>00182   layoutCheckResult_-&gt;elementAt(3,0)-&gt;setContentAlignment(AlignCenter);
<a name="l00183"></a>00183   layoutCheckResult_-&gt;elementAt(3,0)-&gt;addWidget( bOsAddUpdate_ = <span class="keyword">new</span> WPushButton() );
<a name="l00184"></a>00184   layoutCheckResult_-&gt;elementAt(3,1)-&gt;setContentAlignment(AlignCenter);
<a name="l00185"></a>00185   layoutCheckResult_-&gt;elementAt(3,1)-&gt;addWidget( bOsCancel_ = <span class="keyword">new</span> WPushButton(<span class="stringliteral">&quot;Cancel / Edit&quot;</span>) );
<a name="l00186"></a>00186   layoutCheckResult_-&gt;hide();
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   <span class="comment">// Trigger bOsAddUpdate_Click() function on &#39;Add OS&#39; or &#39;Update Pcimap&#39; click.</span>
<a name="l00189"></a>00189   bOsAddUpdate_-&gt;clicked().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a9410ca994da18efa97a753ebeca4d2b1" title="Triggered on &amp;#39;Add OS!&amp;#39; or &amp;#39;Update Pcimap!&amp;#39; button click.">AnalyzeOsWidget::bOsAddUpdate_Click</a>);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="comment">// Trigger bOsCancel_Click() function on &#39;Cancel / Edit&#39; click.</span>
<a name="l00192"></a>00192   bOsCancel_-&gt;clicked().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a05cc8cbedffa49826025dc78e495b4fa" title="Triggered on &amp;#39;Cancel / Edit&amp;#39; button click.">AnalyzeOsWidget::bOsCancel_Click</a>);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   layoutResult_-&gt;elementAt(1,0)-&gt;addWidget( <span class="keyword">new</span> WText(<span class="stringliteral">&quot;*Fields above are editable!&quot;</span>) );
<a name="l00195"></a>00195   <span class="comment">/*</span>
<a name="l00196"></a>00196 <span class="comment">   * @}</span>
<a name="l00197"></a>00197 <span class="comment">   */</span>
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 }
<a name="l00200"></a>00200 
<a name="l00201"></a><a class="code" href="classAnalyzeOsWidget.html#a76396c1db1c7ac3a443929ded68ca878">00201</a> <a class="code" href="classAnalyzeOsWidget.html" title="Analyze OS Page representation.">AnalyzeOsWidget</a>* <a class="code" href="classAnalyzeOsWidget.html#a76396c1db1c7ac3a443929ded68ca878" title="Retrieve an AnalyzeOsWidget instance.">AnalyzeOsWidget::Instance</a>( WContainerWidget* parent)
<a name="l00202"></a>00202 {
<a name="l00203"></a>00203   <span class="keywordflow">if</span>( parent == 0 ){
<a name="l00204"></a>00204     <span class="keywordflow">if</span> ( !<a class="code" href="classAnalyzeOsWidget.html#aed7155e9f4a27d063f43676e838be0f2" title="Pointer to the only instance of AnalyzeOsWidget per session.">instance_</a> ){
<a name="l00205"></a>00205       <span class="comment">// we didn&#39;t receive a parent and there is no instance of AnalyzeOsWidget, so return NULL..</span>
<a name="l00206"></a>00206       <span class="keywordflow">return</span> NULL;
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208   }
<a name="l00209"></a>00209   <span class="keywordflow">else</span>{                         <span class="comment">// We received a parent container</span>
<a name="l00210"></a>00210     <span class="keywordflow">if</span>( !<a class="code" href="classAnalyzeOsWidget.html#aed7155e9f4a27d063f43676e838be0f2" title="Pointer to the only instance of AnalyzeOsWidget per session.">instance_</a> ){
<a name="l00211"></a>00211       <a class="code" href="classAnalyzeOsWidget.html#aed7155e9f4a27d063f43676e838be0f2" title="Pointer to the only instance of AnalyzeOsWidget per session.">instance_</a> = <span class="keyword">new</span> <a class="code" href="classAnalyzeOsWidget.html#acb7d27f414ab05df7ac2ee5cc2bb688e" title="Constructor.">AnalyzeOsWidget</a>(parent);
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     <span class="comment">// else don&#39;t care, we already have an instance we will return that.</span>
<a name="l00214"></a>00214   }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <a class="code" href="classAnalyzeOsWidget.html#aefe7f3c1fb0acfe454f03b37fddbb032">isOsUploaded_</a>=<span class="keyword">false</span>;
<a name="l00217"></a>00217   <a class="code" href="classAnalyzeOsWidget.html#abdcff8e978a2a9ff3a0e82868ad8a90e">isPcimapUploaded_</a>=<span class="keyword">false</span>;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <span class="keywordflow">return</span> <a class="code" href="classAnalyzeOsWidget.html#aed7155e9f4a27d063f43676e838be0f2" title="Pointer to the only instance of AnalyzeOsWidget per session.">instance_</a>;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="classAnalyzeOsWidget.html#aa7cb68854d6fdc2434bda4607d644655">00223</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#aa7cb68854d6fdc2434bda4607d644655" title="Triggered on &amp;#39;Upload&amp;#39; button click.">AnalyzeOsWidget::bUpload_Click</a>()
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225   <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>-&gt;upload();          <span class="comment">// This will trigger uploaded event of uploadOs_ file upload area.</span>
<a name="l00226"></a>00226   <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>-&gt;upload();      <span class="comment">// This will trigger uploaded event of uploadPcimap_ file upload area.</span>
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="classAnalyzeOsWidget.html#a2273a49e40547a9ec6c2e7a0a9394433">00230</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a2273a49e40547a9ec6c2e7a0a9394433" title="Called on uploaded() event of uploadOs_ File Upload.">AnalyzeOsWidget::osUploaded</a>()
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232   <span class="comment">// Get temporary name of uploaded &#39;distro.txt&#39; file at Server. Files are given random names on upload.</span>
<a name="l00233"></a>00233   <a class="code" href="classAnalyzeOsWidget.html#a57bbe05fce11d044f1aad3340f79db01" title="Path to the uploaded &amp;#39;distro.txt&amp;#39; file.">os_file_</a> = <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>-&gt;spoolFileName();
<a name="l00234"></a>00234   <span class="keywordflow">if</span> ( !<a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>-&gt;emptyFileName() ){
<a name="l00235"></a>00235     <span class="keywordflow">if</span>( <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>-&gt;clientFileName().narrow() == <span class="stringliteral">&quot;distro.txt&quot;</span> ){
<a name="l00236"></a>00236       <a class="code" href="classAnalyzeOsWidget.html#aefe7f3c1fb0acfe454f03b37fddbb032">isOsUploaded_</a> = <span class="keyword">true</span>;
<a name="l00237"></a>00237       <a class="code" href="classAnalyzeOsWidget.html#a9e910686ffa57198f5d5b48db5a7b8f9" title="Check upload status and change to Analyze Result screen.">uploadDone</a>();   
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239   }
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00243"></a><a class="code" href="classAnalyzeOsWidget.html#a6da9ecd068101c9d879ff88d7ec22c9c">00243</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a6da9ecd068101c9d879ff88d7ec22c9c" title="Called on uploaded() event of uploadPcimap_ File Upload.">AnalyzeOsWidget::pcimapUploaded</a>()
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245   <span class="comment">// Get temporary name of uploaded &#39;modules.pcimap&#39; file at Server. Files are given random names on upload.</span>
<a name="l00246"></a>00246   <a class="code" href="classAnalyzeOsWidget.html#a7de24593256fd44e93bb9668572ae2d5" title="Path to the uploaded &amp;#39;modules.pcimap&amp;#39; file.">pcimap_file_</a> = <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>-&gt;spoolFileName();
<a name="l00247"></a>00247   <span class="keywordflow">if</span> ( !<a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>-&gt;emptyFileName() ){
<a name="l00248"></a>00248     <span class="keywordflow">if</span>( <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>-&gt;clientFileName().narrow() == <span class="stringliteral">&quot;modules.pcimap&quot;</span> ){
<a name="l00249"></a>00249       <a class="code" href="classAnalyzeOsWidget.html#abdcff8e978a2a9ff3a0e82868ad8a90e">isPcimapUploaded_</a> = <span class="keyword">true</span>;
<a name="l00250"></a>00250       <a class="code" href="classAnalyzeOsWidget.html#a9e910686ffa57198f5d5b48db5a7b8f9" title="Check upload status and change to Analyze Result screen.">uploadDone</a>();
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252   }
<a name="l00253"></a>00253 }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 
<a name="l00256"></a><a class="code" href="classAnalyzeOsWidget.html#a9e910686ffa57198f5d5b48db5a7b8f9">00256</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a9e910686ffa57198f5d5b48db5a7b8f9" title="Check upload status and change to Analyze Result screen.">AnalyzeOsWidget::uploadDone</a>()
<a name="l00257"></a>00257 {
<a name="l00258"></a>00258   <span class="keywordflow">if</span> ( <a class="code" href="classAnalyzeOsWidget.html#aefe7f3c1fb0acfe454f03b37fddbb032">isOsUploaded_</a> &amp;&amp; <a class="code" href="classAnalyzeOsWidget.html#abdcff8e978a2a9ff3a0e82868ad8a90e">isPcimapUploaded_</a> ){    <span class="comment">// Check if both &#39;distro.txt&#39; and &#39;modules.pcimap&#39; are uploaded.</span>
<a name="l00259"></a>00259     <a class="code" href="classAnalyzeOsWidget.html#a82f06e4c6d1b21135ac46339673b41aa" title="Read OS information and store it.">readOs</a>();                   <span class="comment">// Read OS information from &#39;distro.txt&#39; file.</span>
<a name="l00260"></a>00260     <a class="code" href="classAnalyzeOsWidget.html#ab3d4e2222916560706983da82703fd87" title="To build the layout structure of Anayze OS upload page.">layoutAnalyze_</a>-&gt;hide();
<a name="l00261"></a>00261     <a class="code" href="classAnalyzeOsWidget.html#afb34bbdf9917d6f51093e023485f4a20" title="To build the layout structure of Anayze OS Result page.">layoutResult_</a>-&gt;show();      <span class="comment">// Switch to the Result screen.</span>
<a name="l00262"></a>00262     <a class="code" href="classAnalyzeOsWidget.html#aefe7f3c1fb0acfe454f03b37fddbb032">isOsUploaded_</a>=<span class="keyword">false</span>;
<a name="l00263"></a>00263     <a class="code" href="classAnalyzeOsWidget.html#abdcff8e978a2a9ff3a0e82868ad8a90e">isPcimapUploaded_</a>=<span class="keyword">false</span>;
<a name="l00264"></a>00264   }
<a name="l00265"></a>00265     
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="classAnalyzeOsWidget.html#a82f06e4c6d1b21135ac46339673b41aa">00268</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a82f06e4c6d1b21135ac46339673b41aa" title="Read OS information and store it.">AnalyzeOsWidget::readOs</a>()
<a name="l00269"></a>00269 {
<a name="l00270"></a>00270   std::string os_name, release, kernel, architecture;
<a name="l00271"></a>00271   std::ifstream distro(<a class="code" href="classAnalyzeOsWidget.html#a57bbe05fce11d044f1aad3340f79db01" title="Path to the uploaded &amp;#39;distro.txt&amp;#39; file.">os_file_</a>.c_str());   <span class="comment">// Open &#39;distro.txt&#39; file.</span>
<a name="l00272"></a>00272   getline(distro,os_name);
<a name="l00273"></a>00273   getline(distro,release);
<a name="l00274"></a>00274   getline(distro,kernel);
<a name="l00275"></a>00275   getline(distro,architecture);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="comment">// Create an OsInfo object with the OS information read.</span>
<a name="l00278"></a>00278   <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a> = <span class="keyword">new</span> <a class="code" href="classOsInfo.html" title="Represents an Operating System object.">OsInfo</a>(os_name,release,kernel,architecture);
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="comment">// Fill in the edit regions at Result screen.</span>
<a name="l00281"></a>00281   <a class="code" href="classAnalyzeOsWidget.html#a5314919cd4fd5de7ec781ff130476b1b" title="Fill Edit regions of Analyze Result screen.">fillDetectedOs</a>();
<a name="l00282"></a>00282 }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 
<a name="l00285"></a><a class="code" href="classAnalyzeOsWidget.html#a5314919cd4fd5de7ec781ff130476b1b">00285</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a5314919cd4fd5de7ec781ff130476b1b" title="Fill Edit regions of Analyze Result screen.">AnalyzeOsWidget::fillDetectedOs</a>()
<a name="l00286"></a>00286 {
<a name="l00287"></a>00287   <a class="code" href="classAnalyzeOsWidget.html#a93a7bcbcd6ab255e63e82576021339c2" title="Edit region holding Operating System Name.">editOs_</a>-&gt;setText( <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a4d5a9c2feed1af362bf0b9f2c8eb7b6f" title="Retrieve name of the Distribution.">getDistro</a>() );
<a name="l00288"></a>00288   <a class="code" href="classAnalyzeOsWidget.html#a3868fbc005c05380cd03072ef47040dd" title="Edit region holding Release Name.">editRel_</a>-&gt;setText( <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a197b08ecbede67112713c055b054a124" title="Retrieve name of the Release.">getRelease</a>() );
<a name="l00289"></a>00289   <a class="code" href="classAnalyzeOsWidget.html#a368a3eaf504da04f356d764c8bf18d4e" title="Edit region holding Kernel Version.">editKer_</a>-&gt;setText( <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#aaa34d686cfffbc7b8908d161a491ce10" title="Retrieve Kernel version of the Release.">getKernel</a>() );
<a name="l00290"></a>00290   <a class="code" href="classAnalyzeOsWidget.html#a4f40c526572a80d5526df2f12caa86d4" title="Edit region holding Kernel Machine Architecture.">editArch_</a>-&gt;setText( <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#ad78cb706952f58e0d4ce7fd4fa01bde5" title="Retrieve the architecture the Kernel compiled for.">getArch</a>() );
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">/*</span>
<a name="l00295"></a>00295 <span class="comment">  Global function from database.cc to query uKernelID of</span>
<a name="l00296"></a>00296 <span class="comment">  the given operating system.</span>
<a name="l00297"></a>00297 <span class="comment">*/</span>
<a name="l00299"></a>00299 std::string <a class="code" href="database_8cc.html#a7b16e2c78f04cfd8dd7ebe0a12e6543a" title="Query unique kernel ID of an OS.">queryOsKernelId</a>(std::string os_name,std::string release,std::string kernel,std::string architecture);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="classAnalyzeOsWidget.html#ace0500ace0b2c4ce82403f6062f85700">00302</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#ace0500ace0b2c4ce82403f6062f85700" title="Triggered on &amp;#39;Check Record&amp;#39; button click.">AnalyzeOsWidget::bCheckOs_Click</a>()
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304   <a class="code" href="classAnalyzeOsWidget.html#aff17ebb1e2b45c1615359ddd5ae63fcd" title="Group OS info edit regions in here.">groupDetectedOs_</a>-&gt;disable();
<a name="l00305"></a>00305   
<a name="l00306"></a>00306   std::string osKernelId;
<a name="l00307"></a>00307   <span class="comment">// Query unique kernel id.</span>
<a name="l00308"></a>00308   osKernelId=<a class="code" href="database_8cc.html#a7b16e2c78f04cfd8dd7ebe0a12e6543a" title="Query unique kernel ID of an OS.">queryOsKernelId</a>(<a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a4d5a9c2feed1af362bf0b9f2c8eb7b6f" title="Retrieve name of the Distribution.">getDistro</a>(),<a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a197b08ecbede67112713c055b054a124" title="Retrieve name of the Release.">getRelease</a>(),<a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#aaa34d686cfffbc7b8908d161a491ce10" title="Retrieve Kernel version of the Release.">getKernel</a>(),<a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#ad78cb706952f58e0d4ce7fd4fa01bde5" title="Retrieve the architecture the Kernel compiled for.">getArch</a>());
<a name="l00309"></a>00309   
<a name="l00310"></a>00310   <span class="keywordflow">if</span>( osKernelId != <span class="stringliteral">&quot;&quot;</span>){
<a name="l00311"></a>00311     <span class="comment">// OS Found!</span>
<a name="l00312"></a>00312     <a class="code" href="classAnalyzeOsWidget.html#aa017966633dcfd6ec1c6cfbb38fb17c7">txtOsResult_</a>-&gt;setText(<span class="stringliteral">&quot;Operating System Already in Database!&quot;</span>);
<a name="l00313"></a>00313     <a class="code" href="classAnalyzeOsWidget.html#a937c6320a6ccb14e25996f11bb68da2a" title="Declaration of &amp;#39;Add OS!&amp;#39;/&amp;#39;Update Pcimap!&amp;#39; button.">bOsAddUpdate_</a>-&gt;setText(<span class="stringliteral">&quot;Update Pcimap!&quot;</span>);
<a name="l00314"></a>00314     <a class="code" href="classAnalyzeOsWidget.html#ae6447212441b13a21937de7a4d227a07" title="Layout structure of OS Check Record result.">layoutCheckResult_</a>-&gt;show();
<a name="l00315"></a>00315   }
<a name="l00316"></a>00316   <span class="keywordflow">else</span>{
<a name="l00317"></a>00317     <span class="comment">// Os not found..</span>
<a name="l00318"></a>00318     <a class="code" href="classAnalyzeOsWidget.html#aa017966633dcfd6ec1c6cfbb38fb17c7">txtOsResult_</a>-&gt;setText(<span class="stringliteral">&quot;Operating System NOT Found! &lt;br /&gt; Add Operating System to Database&quot;</span>);
<a name="l00319"></a>00319     <a class="code" href="classAnalyzeOsWidget.html#a937c6320a6ccb14e25996f11bb68da2a" title="Declaration of &amp;#39;Add OS!&amp;#39;/&amp;#39;Update Pcimap!&amp;#39; button.">bOsAddUpdate_</a>-&gt;setText(<span class="stringliteral">&quot;Add OS!&quot;</span>);
<a name="l00320"></a>00320     <a class="code" href="classAnalyzeOsWidget.html#ae6447212441b13a21937de7a4d227a07" title="Layout structure of OS Check Record result.">layoutCheckResult_</a>-&gt;show();
<a name="l00321"></a>00321   }
<a name="l00322"></a>00322   
<a name="l00323"></a>00323   WOverlayLoadingIndicator *loading;
<a name="l00324"></a>00324   WApplication::instance()-&gt;setLoadingIndicator( loading = <span class="keyword">new</span> WOverlayLoadingIndicator() );
<a name="l00325"></a>00325   loading-&gt;setMessage(<span class="stringliteral">&quot;Analyzing..&quot;</span>);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 <span class="comment">/*</span>
<a name="l00330"></a>00330 <span class="comment"> * Update corresponding parts of the osDist_, OsInfo object</span>
<a name="l00331"></a>00331 <span class="comment"> * on &#39;Save&#39; button click of InPlaceEdit regions..</span>
<a name="l00332"></a>00332 <span class="comment"> * @{</span>
<a name="l00333"></a>00333 <span class="comment"> */</span>
<a name="l00334"></a>00334 <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a866d89a7f2359d904aa3b2fd90c05241" title="Triggered when &amp;#39;OS Name&amp;#39; edited.">AnalyzeOsWidget::changeOsName</a>( WString os_name )
<a name="l00335"></a>00335 {
<a name="l00336"></a>00336   <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#ae8c6baf07e748edbf70a0df177692434" title="Change name of the Distribution.">setDistro</a>(os_name.narrow());
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a947aafa9b1dec6e6c134c5cd33f3bf5d" title="Triggered when &amp;#39;Release&amp;#39; edited.">AnalyzeOsWidget::changeRelease</a>( WString release )
<a name="l00339"></a>00339 {
<a name="l00340"></a>00340   <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a849a136ecc8e3c65adab1bd44d006d22" title="Change name of the Release.">setRelease</a>(release.narrow());
<a name="l00341"></a>00341 }
<a name="l00342"></a>00342 <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a18556df2bfc682457829b86b2c07f283" title="Triggered when &amp;#39;Kernel&amp;#39; edited.">AnalyzeOsWidget::changeKernel</a>( WString kernel )
<a name="l00343"></a>00343 {
<a name="l00344"></a>00344   <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a6f59118ac50551c7d707c7332a15881f" title="Change Kernel version.">setKernel</a>(kernel.narrow());
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a2cce1ea7d04f152cd07c1af1f8cbebb9" title="Triggered when &amp;#39;Arch.&amp;#39; edited.">AnalyzeOsWidget::changeArch</a>( WString arch )
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348   <a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>-&gt;<a class="code" href="classOsInfo.html#a6f96c941ce36b21b4c3cdc48905c7aef" title="Change the Kernel Architecture.">setArch</a>(arch.narrow());
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 <span class="comment">/*</span>
<a name="l00351"></a>00351 <span class="comment"> * @}</span>
<a name="l00352"></a>00352 <span class="comment"> */</span>
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a><a class="code" href="classAnalyzeOsWidget.html#a05cc8cbedffa49826025dc78e495b4fa">00356</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a05cc8cbedffa49826025dc78e495b4fa" title="Triggered on &amp;#39;Cancel / Edit&amp;#39; button click.">AnalyzeOsWidget::bOsCancel_Click</a>()
<a name="l00357"></a>00357 {
<a name="l00358"></a>00358   WApplication::instance()-&gt;setLoadingIndicator( <span class="keyword">new</span> WDefaultLoadingIndicator() );
<a name="l00359"></a>00359   <a class="code" href="classAnalyzeOsWidget.html#ae6447212441b13a21937de7a4d227a07" title="Layout structure of OS Check Record result.">layoutCheckResult_</a>-&gt;hide();
<a name="l00360"></a>00360   <a class="code" href="classAnalyzeOsWidget.html#aff17ebb1e2b45c1615359ddd5ae63fcd" title="Group OS info edit regions in here.">groupDetectedOs_</a>-&gt;enable();
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 
<a name="l00365"></a>00365 <span class="comment">/*</span>
<a name="l00366"></a>00366 <span class="comment">  Global function from pci_module/os_pci_module.cc to store OS along with</span>
<a name="l00367"></a>00367 <span class="comment">  it&#39;s &#39;modules.pcimap&#39; list in database, or just to update the &#39;modules.pcimap&#39; list</span>
<a name="l00368"></a>00368 <span class="comment">  if the given OS exists.</span>
<a name="l00369"></a>00369 <span class="comment">*/</span>
<a name="l00371"></a>00371 <span class="keywordtype">int</span> <a class="code" href="os__pci__module_8cc.html#a8881b7915b748978d359313b092a2a5e" title="Organize saving of OS-pcimap_list in database.">os_pci_module</a>( <a class="code" href="classOsInfo.html" title="Represents an Operating System object.">OsInfo</a> osInfo, std::string pcimapFile );
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="classAnalyzeOsWidget.html#a9410ca994da18efa97a753ebeca4d2b1">00375</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a9410ca994da18efa97a753ebeca4d2b1" title="Triggered on &amp;#39;Add OS!&amp;#39; or &amp;#39;Update Pcimap!&amp;#39; button click.">AnalyzeOsWidget::bOsAddUpdate_Click</a>()
<a name="l00376"></a>00376 {
<a name="l00377"></a>00377   <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a> = <span class="keyword">new</span> WDialog(<span class="stringliteral">&quot;OS Analysis Result&quot;</span>);
<a name="l00378"></a>00378   
<a name="l00379"></a>00379   <span class="keywordflow">if</span>( <a class="code" href="os__pci__module_8cc.html#a8881b7915b748978d359313b092a2a5e" title="Organize saving of OS-pcimap_list in database.">os_pci_module</a>( *<a class="code" href="classAnalyzeOsWidget.html#abeba0f04b27ca0fb0d8bc57c6127c61c" title="Holds the detected OS information.">osDist_</a>, <a class="code" href="classAnalyzeOsWidget.html#a7de24593256fd44e93bb9668572ae2d5" title="Path to the uploaded &amp;#39;modules.pcimap&amp;#39; file.">pcimap_file_</a> ) == 0 ){       <span class="comment">// Add/Update OS-modules.pcimap in database.</span>
<a name="l00380"></a>00380     <span class="keyword">new</span> WText(<span class="stringliteral">&quot;OS succesfully added/updated! &lt;br /&gt; Now Directing to homepage&quot;</span>, <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents() );
<a name="l00381"></a>00381     <span class="keyword">new</span> WBreak( <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents() );
<a name="l00382"></a>00382     WPushButton* dialogResultOk = <span class="keyword">new</span> WPushButton(<span class="stringliteral">&quot;Ok&quot;</span>, <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents());
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="comment">// Sets WDialog::DialogCode to Accepted when OK is clicked which happens on successful update.</span>
<a name="l00385"></a>00385     (*dialogResultOk).clicked().connect( SLOT(<a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>, WDialog::accept) );
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;show();
<a name="l00388"></a>00388   }
<a name="l00389"></a>00389   <span class="keywordflow">else</span>{
<a name="l00390"></a>00390     <span class="keyword">new</span> WText(<span class="stringliteral">&quot;FAILED to add/update OS! &lt;br /&gt; &quot;</span>
<a name="l00391"></a>00391               <span class="stringliteral">&quot;Probably because of an insert failure into pcimap database&quot;</span>, <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents() );
<a name="l00392"></a>00392     <span class="keyword">new</span> WBreak( <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents() );
<a name="l00393"></a>00393     WPushButton* dialogResultFail = <span class="keyword">new</span> WPushButton(<span class="stringliteral">&quot;Close&quot;</span>, <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;contents());
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="comment">// Sets WDialog::DialogCode to Rejected when Close is clicked which happens on failure of update.</span>
<a name="l00396"></a>00396     (*dialogResultFail).clicked().connect( SLOT(<a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>, WDialog::reject) );
<a name="l00397"></a>00397     
<a name="l00398"></a>00398     <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;show();
<a name="l00399"></a>00399   }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="comment">// Trigger &#39;redirectAndDestroyDialog&#39; function on &#39;dialogResult_&#39; dialog window close.</span>
<a name="l00402"></a>00402   <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>-&gt;finished().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#ac2d7ec538feea2618aa6336ca8178b43" title="Triggered on dialogResult_ close.">AnalyzeOsWidget::redirectAndDestroyDialog</a>);
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#ac2d7ec538feea2618aa6336ca8178b43" title="Triggered on dialogResult_ close.">AnalyzeOsWidget::redirectAndDestroyDialog</a>( WDialog::DialogCode code )
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407   <span class="keywordflow">if</span> ( code == WDialog::Accepted )  <span class="comment">// if OS-pcimap update is successful.</span>
<a name="l00408"></a>00408     <a class="code" href="classAnalyzeOsWidget.html#a3a45892fb00fe8810e6b7ece1d2cb462" title="Go to Home page.">goHome</a>();
<a name="l00409"></a>00409   <span class="keywordflow">else</span>                              <span class="comment">// There was a failure on update.</span>
<a name="l00410"></a>00410     <a class="code" href="classAnalyzeOsWidget.html#a05cc8cbedffa49826025dc78e495b4fa" title="Triggered on &amp;#39;Cancel / Edit&amp;#39; button click.">bOsCancel_Click</a>();
<a name="l00411"></a>00411   <span class="keyword">delete</span> <a class="code" href="classAnalyzeOsWidget.html#af266808bf55e942b1ba923282e45ca24" title="Dialog window displaying success or failure of OS-Pcimap update.">dialogResult_</a>;
<a name="l00412"></a>00412 }
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="classAnalyzeOsWidget.html#a3a45892fb00fe8810e6b7ece1d2cb462">00415</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a3a45892fb00fe8810e6b7ece1d2cb462" title="Go to Home page.">AnalyzeOsWidget::goHome</a>()
<a name="l00416"></a>00416 {
<a name="l00417"></a>00417   <span class="comment">/*</span>
<a name="l00418"></a>00418 <span class="comment">    set URL to /application_path.wt#/home,</span>
<a name="l00419"></a>00419 <span class="comment">    also trigger WApplication::internalPathChanged(),</span>
<a name="l00420"></a>00420 <span class="comment">    which is binded to HarixApp::internalPathChanged() function.</span>
<a name="l00421"></a>00421 <span class="comment">  */</span>
<a name="l00422"></a>00422   WApplication::instance()-&gt;setInternalPath(<span class="stringliteral">&quot;/home&quot;</span>,<span class="keyword">true</span>);
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="classAnalyzeOsWidget.html#a35d9d169edc91a74383fddc1280d1cc6">00426</a> <span class="keywordtype">void</span> <a class="code" href="classAnalyzeOsWidget.html#a35d9d169edc91a74383fddc1280d1cc6" title="Reset instance to initial state.">AnalyzeOsWidget::resetAll</a>()
<a name="l00427"></a>00427 {
<a name="l00428"></a>00428   WApplication::instance()-&gt;setLoadingIndicator( <span class="keyword">new</span> WDefaultLoadingIndicator() );
<a name="l00429"></a>00429 
<a name="l00430"></a>00430   <span class="comment">// Delete File Upload areas to refresh page, and delete files on server..</span>
<a name="l00431"></a>00431   <span class="keyword">delete</span> <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>;
<a name="l00432"></a>00432   <span class="keyword">delete</span> <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>;
<a name="l00433"></a>00433   
<a name="l00434"></a>00434   <a class="code" href="classAnalyzeOsWidget.html#ab3d4e2222916560706983da82703fd87" title="To build the layout structure of Anayze OS upload page.">layoutAnalyze_</a>-&gt;elementAt(2,1)-&gt;addWidget( <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a> = <span class="keyword">new</span> WFileUpload() );
<a name="l00435"></a>00435   <a class="code" href="classAnalyzeOsWidget.html#ab3d4e2222916560706983da82703fd87" title="To build the layout structure of Anayze OS upload page.">layoutAnalyze_</a>-&gt;elementAt(3,1)-&gt;addWidget( <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a> = <span class="keyword">new</span> WFileUpload() );
<a name="l00436"></a>00436   
<a name="l00437"></a>00437   <span class="comment">// Refresh bindings..</span>
<a name="l00438"></a>00438   <a class="code" href="classAnalyzeOsWidget.html#aca82eebf15b1f6c41bebeaf493f8b69a" title="&amp;#39;Upload&amp;#39; button declaration.">bUpload_</a>-&gt;clicked().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#aa7cb68854d6fdc2434bda4607d644655" title="Triggered on &amp;#39;Upload&amp;#39; button click.">AnalyzeOsWidget::bUpload_Click</a>);
<a name="l00439"></a>00439   
<a name="l00440"></a>00440   <span class="comment">// React to a succesfull upload.</span>
<a name="l00441"></a>00441   <a class="code" href="classAnalyzeOsWidget.html#a8b93a4ad1f8e795ef61cd5f84fe99f14" title="File Upload area declaration for distro.txt.">uploadOs_</a>-&gt;uploaded().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a2273a49e40547a9ec6c2e7a0a9394433" title="Called on uploaded() event of uploadOs_ File Upload.">AnalyzeOsWidget::osUploaded</a>);
<a name="l00442"></a>00442   <a class="code" href="classAnalyzeOsWidget.html#a3bba37498758cda1776dee0b8b881dd3" title="File Upload area declaration for modules.pcimap.">uploadPcimap_</a>-&gt;uploaded().connect(<span class="keyword">this</span>, &amp;<a class="code" href="classAnalyzeOsWidget.html#a6da9ecd068101c9d879ff88d7ec22c9c" title="Called on uploaded() event of uploadPcimap_ File Upload.">AnalyzeOsWidget::pcimapUploaded</a>);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   <span class="comment">// Change to Upload Screen.</span>
<a name="l00445"></a>00445   <a class="code" href="classAnalyzeOsWidget.html#ab3d4e2222916560706983da82703fd87" title="To build the layout structure of Anayze OS upload page.">layoutAnalyze_</a>-&gt;show();
<a name="l00446"></a>00446   <a class="code" href="classAnalyzeOsWidget.html#afb34bbdf9917d6f51093e023485f4a20" title="To build the layout structure of Anayze OS Result page.">layoutResult_</a>-&gt;hide();
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <a class="code" href="classAnalyzeOsWidget.html#ae6447212441b13a21937de7a4d227a07" title="Layout structure of OS Check Record result.">layoutCheckResult_</a>-&gt;hide();
<a name="l00449"></a>00449   <a class="code" href="classAnalyzeOsWidget.html#aff17ebb1e2b45c1615359ddd5ae63fcd" title="Group OS info edit regions in here.">groupDetectedOs_</a>-&gt;enable();
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Jul 30 2010 18:38:51 for hariX by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1-20100728 </small></address>
</body>
</html>
